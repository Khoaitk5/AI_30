<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Cookies</title>
</head>
<body>
    <h1>Cookie Test Page</h1>
    <div id="result"></div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const result = document.getElementById('result');
            
            // Display current cookies
            result.innerHTML = '<h2>Current Cookies:</h2>';
            result.innerHTML += '<p>' + (document.cookie || 'No cookies found') + '</p>';
            
            // Test /me endpoint
            result.innerHTML += '<h2>Testing /me endpoint:</h2>';
            
            fetch('http://localhost:3000/api/auth/me', {
                method: 'GET',
                credentials: 'include'
            })
            .then(response => {
                result.innerHTML += '<p>Status: ' + response.status + '</p>';
                if (response.ok) {
                    return response.json();
                } else {
                    throw new Error('Not authenticated');
                }
            })
            .then(data => {
                result.innerHTML += '<p>User: ' + JSON.stringify(data.user, null, 2) + '</p>';
            })
            .catch(error => {
                result.innerHTML += '<p style="color: red;">Error: ' + error.message + '</p>';
            });
        });
    </script>
</body>
</html>
